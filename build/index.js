(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{nP:()=>f,yp:()=>l,q9:()=>g});const e=function(){function t(t,e){this._maxId=t?t.length+1:1,this._items=t||[],this._whereToRender=e,this._whatToShow="all"}return Object.defineProperty(t.prototype,"whatToShow",{get:function(){return this._whatToShow},set:function(t){this._whatToShow=t,this.renderList()},enumerable:!1,configurable:!0}),t.prototype.removeItem=function(t){this._items.splice(this.getItemArrayIndexById(t),1),0===this._items.length&&(this._maxId=1),this.renderList()},t.prototype.removeCompleted=function(){this._items=this._items.filter((function(t){return!1===t.isCompleted})),this.renderList()},t.prototype.addItem=function(t,e){var i=this._maxId++;this._items.push({id:i,isCompleted:t,content:e}),this.renderList()},t.prototype.getItemById=function(t){for(var e=0,i=this._items;e<i.length;e++){var r=i[e];if(r.id===t)return r}throw"getItemById: Id not found"},t.prototype.getItemArrayIndexById=function(t){for(var e=0,i=this._items;e<i.length;e++){var r=i[e];if(r.id===t)return this._items.indexOf(r)}throw"getItemIndexById: Id not found"},t.prototype.moveItem=function(t,e){var i=this.getItemArrayIndexById(t),r=this.getItemArrayIndexById(e),o=this._items[i];this._items.splice(i,1),this._items.splice(r,0,o),this.renderList()},t.prototype.toggleItem=function(t){var e=this.getItemById(+t);e.isCompleted=!e.isCompleted,this.renderList()},t.prototype.getAllItemsNumber=function(){return this._items.length},t.prototype.getActiveItems=function(){return this._items.filter((function(t){return!1===t.isCompleted}))},t.prototype.getActiveItemsNumber=function(){return this._items.reduce((function(t,e){return t+(!1===e.isCompleted?1:0)}),0)},t.prototype.getCompletedItems=function(){return this._items.filter((function(t){return!0===t.isCompleted}))},t.prototype.getCompletedItemsNumber=function(){return this._items.reduce((function(t,e){return t+(!0===e.isCompleted?1:0)}),0)},t.prototype.renderList=function(){for(g(),f.todoListItems=this._items;null!==document.querySelector(".item");)null==l||l.removeChild(document.querySelector(".item"));var t;switch(this._whatToShow){case"all":default:t=this._items;break;case"active":t=this.getActiveItems();break;case"completed":t=this.getCompletedItems()}t.sort((function(t,e){return+t.isCompleted-+e.isCompleted}));var e=document.querySelector(".list__empty");0===t.length?null==e||e.classList.remove("list--display-none"):null==e||e.classList.add("list--display-none");for(var i=document.createDocumentFragment(),r=0,o=t;r<o.length;r++){var s=o[r],n=document.createElement("article");n.classList.add("item"),n.draggable=!0,n.innerHTML='\n          <input type="checkbox" name="test" id="'.concat(s.id,'" class="item__checkbox" $\n        } ').concat(!0===s.isCompleted?"checked":"",'/>\n          <label for="').concat(s.id,'" class="item__description"\n            >').concat(s.content,'</label>\n          <button class="item__del"></button>\n        '),i.appendChild(n)}null==l||l.appendChild(i)},t}(),i=function(){function t(){}return Object.defineProperty(t.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),t}(),r=function(){function t(){var t,e,i,r=1,o=JSON.parse(null!==(t=localStorage.getItem("isDarkMode"))&&void 0!==t?t:"null");this._isDarkMode=o||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,this._todoListItems=null!==(i=JSON.parse(null!==(e=localStorage.getItem("todoListItems"))&&void 0!==e?e:"null"))&&void 0!==i?i:[{id:r++,isCompleted:!1,content:"Book flight to Israel"},{id:r++,isCompleted:!1,content:"Get a haircut"},{id:r++,isCompleted:!1,content:"Review Hibernate in Action second edition"},{id:r++,isCompleted:!1,content:"Blog about workspace management"},{id:r++,isCompleted:!1,content:"Send copy to editor for review"}]}return Object.defineProperty(t.prototype,"isDarkMode",{get:function(){return this._isDarkMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todoListItems",{get:function(){return this._todoListItems},set:function(t){this._todoListItems=t,localStorage.setItem("todoListItems",JSON.stringify(this._todoListItems))},enumerable:!1,configurable:!0}),t.prototype.toggleDarkMode=function(){this._isDarkMode=!this._isDarkMode,localStorage.setItem("isDarkMode",JSON.stringify(this._isDarkMode))},t}();var o=document.querySelector(".page"),s=document.querySelector(".theme-switcher"),n=document.querySelector(".input__field"),a=document.querySelector(".input__submit"),l=document.querySelector(".list"),d=document.querySelector(".list__tab--type_all"),c=document.querySelector(".list__tab--type_active"),m=document.querySelector(".list__tab--type_completed"),u=document.querySelector(".list__header"),h=document.querySelector(".list__all"),p=document.querySelector(".list__active"),_=document.querySelector(".list__completed"),f=new r;f.isDarkMode&&o.classList.toggle("dark-theme");var v=new e(f.todoListItems,document.querySelector(".list"));function g(){h.innerHTML=v.getAllItemsNumber().toString(),p.innerHTML=v.getActiveItemsNumber().toString(),_.innerHTML=v.getCompletedItemsNumber().toString()}v.renderList(),s.addEventListener("click",(function(){o.classList.toggle("dark-theme"),f.toggleDarkMode()})),n.addEventListener("input",(function(){n.value.length>0?a.disabled=!1:a.disabled=!0})),a.addEventListener("click",(function(t){t.preventDefault(),n.value.length>0?(v.addItem(!1,n.value),n.value="",a.disabled=!0):t.target.disabled=!0})),l.addEventListener("change",(function(t){var e=t.target;v.toggleItem(+e.id),"all"!==v.whatToShow?v.renderList():g()})),l.addEventListener("click",(function(t){var e=t.target,i=t.composedPath()[1];Array.from(e.classList).includes("item__del")&&v.removeItem(+i.children[0].id)})),u.addEventListener("click",(function(t){var e=t.target;Array.from(e.classList).includes("list__clear")?v.removeCompleted():(Array.from(e.classList).includes("list__tab--type_all")&&(v.whatToShow="all",d.classList.add("list__tab--active"),c.classList.remove("list__tab--active"),m.classList.remove("list__tab--active")),Array.from(e.classList).includes("list__tab--type_active")&&(v.whatToShow="active",d.classList.remove("list__tab--active"),c.classList.add("list__tab--active"),m.classList.remove("list__tab--active")),Array.from(e.classList).includes("list__tab--type_completed")&&(v.whatToShow="completed",c.classList.remove("list__tab--active"),d.classList.remove("list__tab--active"),m.classList.add("list__tab--active")))}));var y=new i;l.addEventListener("dragstart",(function(t){var e=t.dataTransfer,i=t.target;e.setData("text/plain",i.children[0].id),e.effectAllowed="move",y.item=t.target,i.classList.add("item--translucent")}));var I=new i;l.addEventListener("dragover",(function(t){var e,i;t.preventDefault();for(var r=t.dataTransfer,o=0,s=t.composedPath();o<s.length;o++){var n=s[o];if(Array.from(null!==(e=n.classList)&&void 0!==e?e:[]).includes("item")){i=n;break}}if(i)return r.dropEffect="move",I.item&&I.item.classList.remove("item--highlighted"),I.item=i,void i.classList.add("item--highlighted")})),l.addEventListener("dragend",(function(){y.item.classList.remove("item--translucent"),I.item&&I.item.classList.remove("item--highlighted")})),l.addEventListener("drop",(function(t){t.preventDefault();var e=+t.dataTransfer.getData("text/plain"),i=+I.item.children[0].id;v.moveItem(e,i)}))})();