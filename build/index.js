(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{nP:()=>g,q9:()=>I});const e=function(){function t(t,e){this._maxId=t.length+1,this._items=t,this._whereToRender=e,this._whatToShow="all"}return Object.defineProperty(t.prototype,"whatToShow",{get:function(){return this._whatToShow},set:function(t){this._whatToShow=t,this.renderList()},enumerable:!1,configurable:!0}),t.prototype.removeItem=function(t){this._items.splice(this.getItemArrayIndexById(t),1),0===this._items.length&&(this._maxId=1),this.renderList()},t.prototype.removeCompleted=function(){this._items=this._items.filter((function(t){return!t.isCompleted})),this.renderList()},t.prototype.addItem=function(t,e){var i=this._maxId++;this._items.push({id:i,isCompleted:t,content:e}),this.renderList()},t.prototype.getItemById=function(t){for(var e=0,i=this._items;e<i.length;e++){var r=i[e];if(r.id===t)return r}throw new Error("getItemById: Id not found")},t.prototype.getItemArrayIndexById=function(t){for(var e=0,i=this._items;e<i.length;e++){var r=i[e];if(r.id===t)return this._items.indexOf(r)}throw new Error("getItemIndexById: Id not found")},t.prototype.moveItem=function(t,e){var i=this.getItemArrayIndexById(t),r=this.getItemArrayIndexById(e),n=this._items[i];this._items.splice(i,1),this._items.splice(r,0,n),this.renderList()},t.prototype.toggleItem=function(t){var e=this.getItemById(+t);e.isCompleted=!e.isCompleted,this.renderList()},t.prototype.getAllItemsNumber=function(){return this._items.length},t.prototype.getActiveItems=function(){return this._items.filter((function(t){return!t.isCompleted}))},t.prototype.getActiveItemsNumber=function(){return this._items.reduce((function(t,e){return t+(e.isCompleted?0:1)}),0)},t.prototype.getCompletedItems=function(){return this._items.filter((function(t){return t.isCompleted}))},t.prototype.getCompletedItemsNumber=function(){return this._items.reduce((function(t,e){return t+(e.isCompleted?1:0)}),0)},t.prototype.renderList=function(){var t,e,i;for(I(),g.todoListItems=this._items;null!==document.querySelector(".item");)null===(t=this._whereToRender)||void 0===t||t.removeChild(document.querySelector(".item"));switch(this._whatToShow){case"active":i=this.getActiveItems();break;case"completed":i=this.getCompletedItems();break;default:i=this._items}i.sort((function(t,e){return+t.isCompleted-+e.isCompleted}));var r=document.querySelector(".list__empty");0===i.length?null==r||r.classList.remove("list--display-none"):null==r||r.classList.add("list--display-none");for(var n=document.createDocumentFragment(),o=0,s=i;o<s.length;o++){var a=s[o],l=document.createElement("article");l.classList.add("item"),l.draggable=!0,l.innerHTML='\n          <input type="checkbox" name="test" id="'.concat(a.id,'" class="item__checkbox" $\n        } ').concat(a.isCompleted?"checked":"",'/>\n          <label for="').concat(a.id,'" class="item__description"\n            >').concat(a.content,'</label>\n          <button class="item__del"></button>\n        '),n.appendChild(l)}null===(e=this._whereToRender)||void 0===e||e.appendChild(n)},t}(),i=function(){function t(){}return Object.defineProperty(t.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),t}(),r=function(){function t(){var t,e,i,r,n,o=1,s=JSON.parse(null!==(t=localStorage.getItem("isDarkMode"))&&void 0!==t?t:"false");this._isDarkMode=s||null!==(i=null===(e=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===e?void 0:e.matches)&&void 0!==i&&i,this._todoListItems=null!==(n=JSON.parse(null!==(r=localStorage.getItem("todoListItems"))&&void 0!==r?r:"null"))&&void 0!==n?n:[{id:o++,isCompleted:!1,content:"Book flight to Israel"},{id:o++,isCompleted:!1,content:"Get a haircut"},{id:o++,isCompleted:!1,content:"Review Hibernate in Action second edition"},{id:o++,isCompleted:!1,content:"Blog about workspace management"},{id:o++,isCompleted:!1,content:"Send copy to editor for review"}]}return Object.defineProperty(t.prototype,"isDarkMode",{get:function(){return this._isDarkMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todoListItems",{get:function(){return this._todoListItems},set:function(t){this._todoListItems=t,localStorage.setItem("todoListItems",JSON.stringify(this._todoListItems))},enumerable:!1,configurable:!0}),t.prototype.toggleDarkMode=function(){this._isDarkMode=!this._isDarkMode,localStorage.setItem("isDarkMode",JSON.stringify(this._isDarkMode))},t}();function n(t){var e=document.querySelector(t);if(null===e)throw new Error("Couldn't find element with selector: '".concat(t,"'"));return e}function o(t){var e=document.querySelector(t);if(null===e)throw new Error("Couldn't find element with selector: '".concat(t,"'"));return e}var s=n(".page"),a=n(".theme-switcher"),l=o(".input__field"),d=o(".input__submit"),c=n(".list"),m=n(".list__tab--type_all"),u=n(".list__tab--type_active"),h=n(".list__tab--type_completed"),p=n(".list__header"),f=n(".list__all"),_=n(".list__active"),v=n(".list__completed"),g=new r;g.isDarkMode&&s.classList.toggle("dark-theme");var y=new e(g.todoListItems,document.querySelector(".list"));function I(){f.innerHTML=y.getAllItemsNumber().toString(),_.innerHTML=y.getActiveItemsNumber().toString(),v.innerHTML=y.getCompletedItemsNumber().toString()}y.renderList(),a.addEventListener("click",(function(){s.classList.toggle("dark-theme"),g.toggleDarkMode()})),l.addEventListener("input",(function(){l.value.length>0?d.disabled=!1:d.disabled=!0})),d.addEventListener("click",(function(t){t.preventDefault(),l.value.length>0?(y.addItem(!1,l.value),l.value="",d.disabled=!0):t.target.disabled=!0})),c.addEventListener("change",(function(t){var e=t.target;y.toggleItem(+e.id),"all"===y.whatToShow?y.renderList():I()})),c.addEventListener("click",(function(t){var e=t.target,i=t.composedPath()[1];Array.from(e.classList).includes("item__del")&&y.removeItem(+i.children[0].id)})),p.addEventListener("click",(function(t){var e=t.target;Array.from(e.classList).includes("list__clear")?y.removeCompleted():(Array.from(e.classList).includes("list__tab--type_all")&&(y.whatToShow="all",m.classList.add("list__tab--active"),u.classList.remove("list__tab--active"),h.classList.remove("list__tab--active")),Array.from(e.classList).includes("list__tab--type_active")&&(y.whatToShow="active",m.classList.remove("list__tab--active"),u.classList.add("list__tab--active"),h.classList.remove("list__tab--active")),Array.from(e.classList).includes("list__tab--type_completed")&&(y.whatToShow="completed",u.classList.remove("list__tab--active"),m.classList.remove("list__tab--active"),h.classList.add("list__tab--active")))}));var L=function(t){if(null===t.dataTransfer)throw new Error("During dragstart it occurred that event data transfer is null");return t.dataTransfer},b=new i;c.addEventListener("dragstart",(function(t){var e=L(t),i=t.target;null==e||e.setData("text/plain",i.children[0].id),e.effectAllowed="move",b.item=t.target,null==i||i.classList.add("item--translucent")}));var w=new i;c.addEventListener("dragover",(function(t){var e,i,r;t.preventDefault();for(var n=L(t),o=0,s=t.composedPath();o<s.length;o++){var a=s[o];if(Array.from(null!==(e=a.classList)&&void 0!==e?e:[]).includes("item")){r=a;break}}void 0!==r&&(n.dropEffect="move",null===(i=w.item)||void 0===i||i.classList.remove("item--highlighted"),w.item=r,r.classList.add("item--highlighted"))})),c.addEventListener("dragend",(function(){var t;b.item.classList.remove("item--translucent"),null===(t=w.item)||void 0===t||t.classList.remove("item--highlighted")})),c.addEventListener("drop",(function(t){t.preventDefault();var e=+L(t).getData("text/plain"),i=+w.item.children[0].id;y.moveItem(e,i)}))})();